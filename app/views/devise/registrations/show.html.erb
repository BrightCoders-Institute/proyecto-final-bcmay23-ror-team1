<div class="profile-view">

  <% if @user_profile.user.present? %>

    <%= render partial: 'users/profile-images' %>

    <!-- Show user info: name, username, bio, join date, follows and follower -->
    <%= render partial: 'devise/registrations/user-info' %>
    
    <!-- show user navigation tabs -->
    <%= render partial: 'users/profile-tabs' %>

    <!-- Show content of column -->
    <div class="post-container">

      <!-- posts and shares columns  -->
      <% if @user_profile.tab == "posts" %>
        <% if @user_profile.posts.any? %>

          <% @user_profile.posts.each do |post| %>
            <% if post.class == Post %>
              <%= render partial: 'posts/post-simple', 
                locals: {
                  view: nil, 
                  post: post,
                  is_parent_of_comment: false} %>

            <% else %>
              <%= render partial: 'shared_posts/shared_post', 
                locals: {
                  view: nil,
                  repost: post } %>

            <% end %>
          <% end %>

        <% else %>
          <p class="no-content-label">No posts</p>
        <% end %>
      <% end %>


      <!-- likes columns -->
      <% if @user_profile.tab == "likes" %>
          <% if @user_profile.liked_posts.any? %>

          <%= render partial: "posts/post-simple",
            collection: @user_profile.liked_posts, as: :post,
            locals: { 
              view: nil,
              is_parent_of_comment: false } %>

          <% else %>
            <p class="no-content-label">No liked posts</p>
          <% end %>
        <% end %>


      <!-- comments columns  -->
      <% if @user_profile.tab == "comments" %>
        <% if @user_profile.comments.any? %>

        <%= render partial: "posts/post-simple", 
          collection: @user_profile.comments, as: :post, 
          locals: {
            view: nil, 
            is_parent_of_comment: false } %>

        <% else %>
          <p class="no-content-label">No comments</p>
        <% end %>
      <% end %>

    </div>

  <% else %> <!-- no user -->

    <%= render partial: 'users/profile-images' %>
    <div class="info-container">
      <h2>User doesn't exists</h2>
    </div>

  <% end %>

  <!-- Show user edit modal -->
  <%= turbo_frame_tag "embedded"  %>
</div>
